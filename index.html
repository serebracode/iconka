<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Iconka</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
            background-color: #000000;
            color: #FFFFFF;
            position: relative;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes flicker {
            0%, 100% { transform: scaleY(1) scaleX(1); }
            25% { transform: scaleY(1.05) scaleX(0.98); }
            50% { transform: scaleY(0.98) scaleX(1.02); }
            75% { transform: scaleY(1.02) scaleX(0.99); }
        }

        @keyframes glow {
            0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.1); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(48px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUpPanel {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        /* –ó–∞–º–µ–Ω—ë–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤: –∏—Å–ø–æ–ª—å–∑—É–µ–º opacity/transform –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π,
           –≤–º–µ—Å—Ç–æ display none/block. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–ª—è –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞. */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;

            /* –≤–º–µ—Å—Ç–æ display:none ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∞–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å */
            opacity: 0;
            transform: translateY(24px) scale(0.99); /* –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤–Ω–∏–∑ */
            visibility: hidden;
            pointer-events: none;

            /* —Å–∏–ª—å–Ω–æ –∑–∞–º–µ–¥–ª—ë–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥: opacity + transform */
            transition: opacity 9000ms cubic-bezier(.22,.9,.28,1), transform 9000ms cubic-bezier(.22,.9,.28,1);
            z-index: 0;
        }

        .screen.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            visibility: visible;
            pointer-events: auto;
            z-index: 20; /* –∞–∫—Ç–∏–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≤—ã—à–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –Ω–∞–ª–æ–∂–µ–Ω–∏–π */
        }

        /* –£–¥–æ–±–Ω—ã–π –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å "stagger"-–ø–æ—è–≤–ª–µ–Ω–∏–µ–º –≤–Ω—É—Ç—Ä–∏ —ç–∫—Ä–∞–Ω–∞ */
        .screen .stagger {
            opacity: 0;
            transform: translateY(12px);
            transition: opacity 450ms ease, transform 450ms ease;
        }
        .screen.active .stagger {
            opacity: 1;
            transform: translateY(0);
        }

        /* –¶–µ–Ω—Ç—Ä–æ–≤–∫–∞ –¥–ª—è loadingScreen (–ø–µ—Ä–µ–Ω–µ—Å–ª–∏ inline-—Å—Ç–∏–ª—å –≤ CSS) */
        #loadingScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* –°–∫—Ä—ã—Ç—å input number arrows */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body>

<!-- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò -->
<div id="loadingScreen" class="screen active" onclick="showListScreen()">
    <div style="width: 120px; height: 120px; border-radius: 24px; background-color: #3A3A3C; margin-bottom: 24px; animation: fadeInScale 0.6s ease-out;"></div>
    <div style="color: #FFFFFF; font-size: 24px; font-weight: 600; animation: fadeIn 0.8s ease-out 0.2s both;">Iconka</div>
</div>

<!-- –≠–ö–†–ê–ù –°–û –°–ü–ò–°–ö–û–ú -->
<div id="listScreen" class="screen">
    <div style="padding: 12px 16px; position: sticky; top: 0; z-index: 50; background-color: #000000;">
        <h1 style="font-size: 32px; font-weight: 700; margin: 0 0 12px 0; letter-spacing: -0.5px;">–°–≤—è—Ç—ã–µ</h1>
        
        <div style="background-color: #1C1C1E; border-radius: 12px; padding: 10px 12px; display: flex; align-items: center;">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" style="margin-right: 8px;">
                <circle cx="9" cy="9" r="8" stroke="#8E8E93" stroke-width="1.5"/>
                <path d="M1 1L9 9M9 1L1 9" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫" style="background: transparent; border: none; outline: none; color: #FFFFFF; font-size: 16px; flex: 1; font-family: inherit;">
            <button id="clearSearch" style="display: none; background-color: #48484A; border: none; border-radius: 50%; width: 18px; height: 18px; align-items: center; justify-content: center; cursor: pointer; padding: 0;">
                <svg width="10" height="10" viewBox="0 0 10 10" fill="none">
                    <path d="M1 1L9 9M9 1L1 9" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
    </div>

    <div id="saintsList" style="padding: 0 0 16px 0;"></div>
</div>

<!-- –≠–ö–†–ê–ù –°–û –°–í–ï–ß–û–ô (–¥–µ—Ç–∞–ª–∏) -->
<div id="detailScreen" class="screen" style="position: absolute; overflow: hidden;">
    <!-- –§–æ–Ω –¥–ª—è –∏–∫–æ–Ω—ã -->
    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: #000000; display: flex; align-items: center; justify-content: center;">
        <div style="position: relative; width: 70%; max-height: 70%;">
            <img id="saintIcon" style="width: 100%; height: auto; display: block; object-fit: contain; filter: brightness(0.8);" alt="–ò–∫–æ–Ω–∞">
            
            <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –∫—Ä–∞—ë–≤ -->
            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(ellipse 50% 50% at 50% 50%, transparent 20%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.85) 80%, #000000 95%); pointer-events: none;"></div>
        </div>
        
        <!-- –û—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç —Å–≤–µ—á–∏ -->
        <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 60%; background: linear-gradient(to top, rgba(255, 200, 100, 0.2) 0%, rgba(255, 180, 80, 0.1) 30%, transparent 60%); pointer-events: none; z-index: 5;"></div>
    </div>

    <!-- –°–≤–µ—á–∞ -->
    <div id="candleContainer" style="position: absolute; bottom: -20%; left: 50%; transform: translateX(-50%); z-index: 10;">
        <div style="position: relative; width: 20px; height: 500px; display: flex; flex-direction: column; align-items: center;">
            <!-- –ü–ª–∞–º—è -->
            <div style="position: absolute; top: -36px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px;">
                <div style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 10px; height: 20px; background: linear-gradient(to top, rgba(255, 200, 0, 1) 0%, rgba(255, 230, 150, 0.8) 100%); border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; filter: blur(0.5px);"></div>
            </div>

            <!-- –¢–µ–ª–æ —Å–≤–µ—á–∏ -->
            <div style="width: 2px; height: 8px; background-color: #1a1a1a; border-radius: 1px; margin-top: -3px;"></div>
        </div>
    </div>

    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div style="position: absolute; top: 0; left: 0; right: 0; padding: 12px; display: flex; align-items: center; justify-content: space-between; z-index: 30;">
        <div style="display:flex; gap:10px; align-items:center;">
            <button id="backBtn" style="background: transparent; border: none; color: #FFFFFF; cursor: pointer;">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                    <circle cx="14" cy="14" r="12" stroke="#FFFFFF" stroke-width="2"/>
                    <path d="M12.5 12.5L16 16" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div style="display:flex; gap:10px; align-items:center;">
            <button id="infoBtn" style="background: transparent; border: none; color: #FFFFFF; cursor: pointer;">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                    <circle cx="14" cy="14" r="12" stroke="#FFFFFF" stroke-width="2"/>
                    <path d="M14 14V19M14 9V10" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- –°–≤–µ—á–µ–Ω–∏–µ -->
    <div style="position: absolute; top: -60px; left: 50%; transform: translateX(-50%); width: 250px; height: 250px; background: radial-gradient(circle, rgba(255, 200, 100, 0.4) 0%, rgba(255, 150, 50, 0.15) 30%, transparent 70%); border-radius: 50%; pointer-events: none; animation: glow 2s ease-in-out infinite;"></div>

    <!-- –ö–Ω–æ–ø–∫–∞ –î–æ–Ω–∞—Ç -->
    <div id="donateBtn" style="display: none; position: absolute; bottom: 0; left: 0; right: 0; z-index: 400; animation: fadeInUp 0.5s ease-out;">
        <button onclick="showDonateOptions()" style="width: 100%; height: 60px; background-color: #2C2C2E; border: none; border-radius: 16px 16px 0 0; color: #FFFFFF; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
            –°–¥–µ–ª–∞—Ç—å –¥–æ–Ω–∞—Ç ‚≠êÔ∏è
        </button>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ –¥–æ–Ω–∞—Ç–∞ -->
    <div id="donateOptions" style="display: none; position: absolute; bottom: 0; left: 0; right: 0; background-color: #2C2C2E; border-radius: 16px 16px 0 0; padding: 20px; z-index: 400; animation: slideUpPanel 0.3s ease-out;">
        <div style="background-color: #1C1C1E; border-radius: 20px; padding: 40px 30px; text-align: center; max-width: 320px; animation: fadeInScale 0.4s ease-out;">
            <div style="font-size: 64px; margin-bottom: 20px;">üôè</div>
            <div style="color: #FFFFFF; font-size: 24px; font-weight: 700; margin-bottom: 12px;">–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É!</div>
            <div style="color: #8E8E93; font-size: 16px; line-height: 1.5; margin-bottom: 30px;">–í–∞—à–∞ —Å–≤–µ—á–∞ –±—É–¥–µ—Ç<br/>–≥–æ—Ä–µ—Ç—å –≤–µ—á–Ω–æ üïØÔ∏è</div>
            <button onclick="closeThankYou()" style="width: 100%; background-color: #B8860B; border: none; border-radius: 12px; padding: 14px; color: #FFFFFF; font-size: 16px; font-weight: 600; cursor: pointer;">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ —Å–≤—è—Ç—ã—Ö
const SAINTS_DATA = [
    { id: 5, title: "–ê–ø–æ—Å—Ç–æ–ª –ê–Ω–¥—Ä–µ–π –ü–µ—Ä–≤–æ–∑–≤–∞–Ω–Ω—ã–π", image: "./images/saints/saint5.jpg" },
    { id: 4, title: "–ê–ø–æ—Å—Ç–æ–ª –ü–∞–≤–µ–ª", image: "./images/saints/saint4.jpg" },
    { id: 3, title: "–ê–ø–æ—Å—Ç–æ–ª –ü—ë—Ç—Ä", image: "./images/saints/saint3.jpg" },
    { id: 21, title: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ù–µ–≤—Å–∫–∏–π", image: "./images/saints/saint21.jpg" },
    { id: 25, title: "–°–µ—Ä–∞—Ñ–∏–º –°–∞—Ä–æ–≤—Å–∫–∏–π", image: "./images/saints/saint25.jpg" },
    { id: 7, title: "–°–≤—è—Ç–∏—Ç–µ–ª—å –ù–∏–∫–æ–ª–∞–π –ß—É–¥–æ—Ç–≤–æ—Ä–µ—Ü", image: "./images/saints/saint7.jpg" },
    { id: 27, title: "–§–µ–æ–¥–æ—Å–∏–π –ü–µ—á–µ—Ä—Å–∫–∏–π", image: "./images/saints/saint27.jpg" },
    { id: 34, title: "–¶–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Å—Ç–æ—Ç–µ—Ä–ø—Ü—ã", image: "./images/saints/saint34.jpg" },
    { id: 29, title: "–ê–º–≤—Ä–æ—Å–∏–π –û–ø—Ç–∏–Ω—Å–∫–∏–π", image: "./images/saints/saint29.jpg" },
    { id: 26, title: "–ê–Ω—Ç–æ–Ω–∏–π –ü–µ—á–µ—Ä—Å–∫–∏–π", image: "./images/saints/saint26.jpg" },
    { id: 8, title: "–í–∞—Å–∏–ª–∏–π –í–µ–ª–∏–∫–∏–π", image: "./images/saints/saint8.jpg" },
    { id: 30, title: "–í–∞—Å–∏–ª–∏–π –ë–ª–∞–∂–µ–Ω–Ω—ã–π", image: "./images/saints/saint30.jpg" },
    { id: 16, title: "–í–µ—Ä–∞, –ù–∞–¥–µ–∂–¥–∞, –õ—é–±–æ–≤—å –∏ –°–æ—Ñ–∏—è", image: "./images/saints/saint16.jpg" },
    { id: 14, title: "–í–µ–ª–∏–∫–æ–º—É—á–µ–Ω–∏—Ü–∞ –í–∞—Ä–≤–∞—Ä–∞", image: "./images/saints/saint14.jpg" }
];

let selectedSaint = null;
let selectedAmount = 50;
let donateTimeout = null;

// Telegram WebApp
if (window.Telegram?.WebApp) {
    window.Telegram.WebApp.ready();
    window.Telegram.WebApp.expand();
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫
function showListScreen() {
    document.getElementById('loadingScreen').classList.remove('active');
    document.getElementById('listScreen').classList.add('active');
    renderSaintsList();
}

// –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Å–≤—è—Ç—ã—Ö
function renderSaintsList(searchQuery = '') {
    const list = document.getElementById('saintsList');
    const filtered = SAINTS_DATA.filter(saint => 
        saint.title.toLowerCase().includes(searchQuery.toLowerCase())
    ).sort((a, b) => a.title.localeCompare(b.title));

    list.innerHTML = filtered.map((saint) => `
        <div onclick="selectSaint(${saint.id})" style="display: flex; align-items: center; padding: 12px 16px; cursor: pointer; background-color: #000000; position: relative;">
            <img src="${saint.image}" alt="${saint.title}" style="width: 48px; height: 48px; border-radius: 12px; object-fit: cover; margin-right: 12px; background-color: #3A3A3C;">
            <div style="flex: 1; color: #FFFFFF; font-size: 16px; font-weight: 400;">${saint.title}</div>
        </div>
    `).join('');
}

// –í—ã–±–æ—Ä —Å–≤—è—Ç–æ–≥–æ
function selectSaint(id) {
    selectedSaint = SAINTS_DATA.find(s => s.id === id);
    document.getElementById('listScreen').classList.remove('active');
    document.getElementById('detailScreen').classList.add('active');
    document.getElementById('saintIcon').src = selectedSaint.image;
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –¥–æ–Ω–∞—Ç–∞ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
    donateTimeout = setTimeout(() => {
        document.getElementById('donateBtn').style.display = 'block';
    }, 10000);
}

// –ù–∞–∑–∞–¥
document.getElementById('backBtn').addEventListener('click', () => {
    document.getElementById('detailScreen').classList.remove('active');
    document.getElementById('listScreen').classList.add('active');
    document.getElementById('donateBtn').style.display = 'none';
    document.getElementById('donateOptions').style.display = 'none';
    if (donateTimeout) clearTimeout(donateTimeout);
});

// –ò–Ω—Ñ–æ
document.getElementById('infoBtn').addEventListener('click', () => {
    document.getElementById('infoTitle')?.remove?.();
    // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: —Å–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–µ –≤—Å–ø–ª—ã—Ç–∏–µ —Å –∏–Ω—Ñ–æ (–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ —Ç—É—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –º–æ–¥–∞–ª–∫–∞)
    const info = document.createElement('div');
    info.id = 'infoTitle';
    info.style.position = 'absolute';
    info.style.bottom = '20px';
    info.style.left = '50%';
    info.style.transform = 'translateX(-50%)';
    info.style.background = '#1C1C1E';
    info.style.padding = '12px 16px';
    info.style.borderRadius = '12px';
    info.style.zIndex = 60;
    info.textContent = selectedSaint ? selectedSaint.title : '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è';
    document.body.appendChild(info);
    setTimeout(() => info.remove(), 2000);
});

// –î–æ–Ω–∞—Ç - –ø–æ–∫–∞–∑ –æ–ø—Ü–∏–π
function showDonateOptions() {
    document.getElementById('donateOptions').style.display = 'block';
}

// –ó–∞–∫—Ä—ã—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å
function closeThankYou() {
    document.getElementById('donateOptions').style.display = 'none';
    document.getElementById('donateBtn').style.display = 'none';
}
</script>
</body>
</html>
